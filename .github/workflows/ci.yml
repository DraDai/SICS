name: Spring Boot CI
on:
  push:
    branches: ["main"]
  pull_request:
    branches: ["main"]
# 2. è®¾ç½®æƒé™ï¼šå…è®¸å†™å…¥åŒ…ä»“åº“ï¼ˆä¸ºå°†æ¥æ¨é€é•œåƒå‡†å¤‡ï¼‰
permissions:
  contents: read
  packages: write
jobs:
  # ä»»åŠ¡ï¼šæ„å»ºä¸æµ‹è¯•
  build-and-test:
    # åœ¨æœ€æ–°çš„ Ubuntu ç¯å¢ƒä¸­è¿è¡Œ
    runs-on: ubuntu-latest

    steps:
      # æ­¥éª¤ 1: æ£€å‡ºä»£ç  (å®˜æ–¹åŠ¨ä½œ)
      - name: ğŸ“¥ Checkout code
        uses: actions/checkout@v4

      # æ­¥éª¤ 2: è®¾ç½® Java ç¯å¢ƒ (å®˜æ–¹åŠ¨ä½œ)
      - name: â˜• Set up JDK 21
        uses: actions/setup-java@v4
        with:
          java-version: '21'
          distribution: 'temurin' # Eclipse Temurin JDK

      # æ­¥éª¤ 3: æ„å»ºé¡¹ç›®ï¼ˆMavenç¤ºä¾‹ï¼‰
      # å¦‚æœæ˜¯Gradleé¡¹ç›®ï¼Œå°†ä¸‹ä¸€è¡Œæ›¿æ¢ä¸º `run: ./gradlew build`
      - name: ğŸ”¨ Build with Maven
        run: mvn clean compile

      # æ­¥éª¤ 4: è¿è¡Œæµ‹è¯•ï¼ˆMavenç¤ºä¾‹ï¼‰
      - name: ğŸ§ª Run Tests
        run: mvn test
